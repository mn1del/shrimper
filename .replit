entrypoint = "app"
modules = ["python-3.10:v18-20230807-322e88b"]  # brings Python into the environment

[nix]
channel = "stable-23_11"

# ensure deps are installed before each run
onBoot = "python3 -m pip install --upgrade pip && python3 -m pip install -r requirements.txt"

# make the packager use pip for Python and allow guessing (optional)
packager.language = "python3"
[packager.features]
guessImports = true
packageSearch = true

# your Flask dev server
run = ["python3","-m","flask","--app","app","run","--host=0.0.0.0","--port=5000","--debug"]

[deployment]
run = ["python3", "-m", "flask", "--app", "app", "run", "--host=0.0.0.0", "--port=5000"]
deploymentTarget = "cloudrun"

[[ports]]
localPort = 5000
externalPort = 80
